<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="오늘은 몇 주차? 업데이트  오늘은 몇 주차?는 오늘이 올해의 몇 주차인지 알려주는 웹 사이트이다. 2018년 쯔음 유사-군생활을 시작하며 모든 것을 주 단위로 계획하고 움직이게 되었다."><title>하나씩</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://quartz.jzhao.xyz//icon.png><link href=https://quartz.jzhao.xyz/styles.706bb6073ba85d26809f9096dae23a6b.min.css rel=stylesheet><link href=https://quartz.jzhao.xyz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://quartz.jzhao.xyz/js/darkmode.63d6a3e095d0bd2b935b62adec9dc11b.min.js></script>
<script src=https://quartz.jzhao.xyz/js/util.5e39932758f9ecaf45fd54506ed61416.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://quartz.jzhao.xyz/js/popover.6da9b273c092cc16fc1aa904d71a2163.min.js></script>
<script src=https://quartz.jzhao.xyz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://quartz.jzhao.xyz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://quartz.jzhao.xyz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://quartz.jzhao.xyz/",fetchData=Promise.all([fetch("https://quartz.jzhao.xyz/indices/linkIndex.f604dc5af2173d6d4799d6cb82546356.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://quartz.jzhao.xyz/indices/contentIndex.71b88c645c121bfbb0f70d4a7e162383.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addCollapsibleCallouts(),initPopover("https://quartz.jzhao.xyz",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://quartz.jzhao.xyz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script>window.Million={navigate:e=>window.location.href=e,prefetch:()=>{}},window.addEventListener("DOMContentLoaded",()=>{init(),render()})</script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://quartz.jzhao.xyz/js/full-text-search.51f0b1753e9b30839d053f8a98cc20d1.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://quartz.jzhao.xyz/>하나씩</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/nyeong/hanassig/tree/main/blog/2022-10-08-nth-week-today.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details open><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#몇-주차-기준이-뭔가요>몇 주차 기준이 뭔가요?</a></li><li><a href=#이슈-처리하기>이슈 처리하기</a></li><li><a href=#오픈-그래프로-결과-미리-알려주기>오픈 그래프로 결과 미리 알려주기</a></li><li><a href=#기타>기타</a></li></ol></nav></details></aside><a href=#오늘은-몇-주차-업데이트><h1 id=오늘은-몇-주차-업데이트><span class=hanchor arialabel=Anchor># </span>오늘은 몇 주차? 업데이트</h1></a><p><a href=https://nyeong.github.io/nth-week-today/ rel=noopener>오늘은 몇 주차?</a>는 오늘이 올해의
몇 주차인지 알려주는 웹 사이트이다. 2018년 쯔음 유사-군생활을 시작하며
모든 것을 주 단위로 계획하고 움직이게 되었다. 그런데 은근 오늘이 몇 주차인지
쉽게 알려주는 서비스가 없어 만들게 되었다.</p><p><img src=https://quartz.jzhao.xyz//2022-10-08/nth-week-today.png width=auto alt></p><p>기능은 단순하다. 오늘 날짜와 오늘이 몇 주차인지 알려주고 끝이다. 처음엔 주차만
넣었는데, 오늘 날짜가 보이지 않으니 얘가 맞게 알려주는 건지 불안해져서 넣었다.
일부러 초 단위로 날짜를 업데이트하여 &ldquo;잘 작동하고 있음"을 과시했다.
나름 UX에 신경썼다고 볼 수 있다.</p><p>은근 수요가 있었는지 한동안 구글에 &ldquo;몇주차"만 검색해도 제일 먼저 결과가 나왔다.
그래서 나도 즐겨찾기에 등록하지 않고 편하게 구글에 검색해서 썼던 기억이 있다.
당시 주소가 <code>annyeong.me/nth-week-today</code>였는데, 생각 없이 도메인 설정을 바꾸며
주소가 바뀌고, 구글 검색 설정에 반영해주지 않아 아쉽게도 검색 결과 순위에서
내려갔다.</p><a href=#몇-주차-기준이-뭔가요><h2 id=몇-주차-기준이-뭔가요><span class=hanchor arialabel=Anchor># </span>몇 주차 기준이 뭔가요?</h2></a><p><a href=/notes/side-projects/nth-weekday/ rel=noopener class=internal-link data-src=/notes/side-projects/nth-weekday/>노트</a>에 자세히 정리하였다.</p><p>간단히 요약하면 날짜와 시간을 표현하는 국제 표준
<a href=https://ko.wikipedia.org/wiki/ISO_8601 rel=noopener>ISO 8601</a>에 의하여, 목요일을
기준으로 주차를 센다. 즉 $n$주차는 $n$번째 목요일이 포함된 주이다.
따라서 재밌게도 1월 1일이 금요일이라면 그 날은 올해의 첫주차가 아니게 된다.
대신 지난해의 마지막 주차가 된다.</p><table><thead><tr><th>Week</th><th>Mon</th><th>Tue</th><th>Wed</th><th><em>Thu</em></th><th>Fri</th><th>Sat</th><th>Sun</th></tr></thead><tbody><tr><td><strong>W53</strong></td><td></td><td></td><td></td><td></td><td>01</td><td>02</td><td>03</td></tr><tr><td><strong>W01</strong></td><td>04</td><td>05</td><td>06</td><td><strong>07</strong></td><td>08</td><td>09</td><td>10</td></tr></tbody></table><p>영어권에서는 week number 혹은 ISO week date로 부르고, <strong>W</strong>를 붙여 표기하는 듯
하다. 예컨데 22년도 4주차면 2022W4와 같이 쓴다. 관련
<a href=https://en.wikipedia.org/wiki/ISO_week_date rel=noopener>위키</a>에 내용이 잘
정리되어 있다.</p><a href=#이슈-처리하기><h2 id=이슈-처리하기><span class=hanchor arialabel=Anchor># </span>이슈 처리하기</h2></a><p>사실 이
<a href=https://github.com/nyeong/nth-week-today rel=noopener>저장소</a>는 2018년에 저장소 팔 때 이후로는 들어간 적이 없다. 오랜만에
우연히 접속하니
<a href=https://github.com/nyeong/nth-week-today/pull/1 rel=noopener>누군가 맞춤법을 고쳐주었다</a>. 오랫동안 사이트의 이름이
<strong>오늘은 몇주차</strong>였는데, <strong>몇 주차</strong>로 띄어쓰기가 맞다는 지적이었다.</p><p>인생 처음으로 받은 풀 리퀘스트인데 거진 1년이 지나서야 발견하고 부랴부랴
머지하였다.</p><p><a href=https://github.com/nyeong/hanassig/issues/15 rel=noopener>또 다른 이슈</a>는 다른 저장소에 올라왔다. 종종 잘 쓰고 있었는데, 링크가
깨졌다는 이슈였다. 이슈를 열어주신 분은 이 오류 때문에 GitHub 계정까지 새로
만드신 것 같았다.</p><p>상기했다시피 본래 <code>annyeong.me/nth-week-today</code>로 접속 가능했으나 GitHub Pages에
연결된 도메인을 바꾸며 <code>nyeong.github.io/nth-week-today</code>로 접속해야해서 생긴
문제였다.</p><p>여러가지 방법이 있겠으나, 이 블로그에 리다이렉션을 추가하는 것이 가장 빠를
것으로 판단하고 바로 작업하였다.</p><p>오랜만에 업데이트를 위하여 저장소에 접속해보니 메인 브랜치가 <code>master</code>이다.
메인 브랜치부터 <code>main</code>으로 다시 이름지었다.</p><p><img src=https://quartz.jzhao.xyz//2022-10-08/rename-branch.png width=auto alt></p><p>GitHub 브랜치 설정에서 원격 저장소의 브랜치 이름을 바꾸고, 로컬에서는 아래의
명령어로 원격 저장소를 다시 설정해준다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># master를 main으로 바꾸기</span>
</span></span><span class=line><span class=cl>git branch -m master main
</span></span><span class=line><span class=cl><span class=c1># origin(github 리모트 저장소)의 변경사항 받아오기</span>
</span></span><span class=line><span class=cl>git fetch origin
</span></span><span class=line><span class=cl><span class=c1># origin/main과 main을 연결하기</span>
</span></span><span class=line><span class=cl>git branch -u origin/main main
</span></span><span class=line><span class=cl><span class=c1># HEAD 설정하기</span>
</span></span><span class=line><span class=cl>git remote set-head origin -a
</span></span></code></pre></td></tr></table></div></div><p>지금 이 블로그는
<a href=https://docusaurus.io/ rel=noopener>도큐사우르스</a> 프레임워크로 만들었는데
<code>src/pages</code> 밑에 <code>.md</code>, <code>.tsx</code> 따위를 만들면 파일 이름으로 바로 접속할 수 있는
페이지를 손쉽게 만들 수 있다. 이 경우는 <code>annyeong.me/nth-week-today</code>로의
접속을 다뤄야 하므로 <code>nth-week-today.tsx</code>를 만들어준다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-diff data-lang=diff><span class=line><span class=cl>src/
</span></span><span class=line><span class=cl>├── components/
</span></span><span class=line><span class=cl>├── css/
</span></span><span class=line><span class=cl>└── pages/
</span></span><span class=line><span class=cl>   ├── index.md
</span></span><span class=line><span class=cl><span class=gi>+  └── nth-week-today.tsx
</span></span></span></code></pre></td></tr></table></div></div><p>각 페이지는 리엑트로 렌더한다. 리엑트는 잘 모르지만, <code>componentDidMount</code>와
비슷한 역할을
<a href=https://reactjs.org/docs/hooks-effect.html rel=noopener>useEffect</a>로
할 수 있다고 한다. 혹시 <code>window.location.href</code>를 변경하는 것으로 리다이렉션이
안 될 경우를 대비하여 사용자가 클릭할 수 있는 링크도 넣는다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-tsx data-lang=tsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;react&#39;</span>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>siteUrl</span> <span class=o>=</span> <span class=s2>&#34;https://nyeong.github.io/nth-week-today/&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=k>default</span> <span class=p>()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nb>window</span><span class=p>.</span><span class=nx>location</span><span class=p>.</span><span class=nx>href</span> <span class=o>=</span> <span class=nx>siteUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;</span><span class=nt>Layout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>      <span class=p>&lt;</span><span class=nt>Link</span> <span class=na>to</span><span class=o>=</span><span class=p>{</span><span class=nx>siteUrl</span><span class=p>}&gt;</span><span class=err>오늘은</span> <span class=err>몇</span> <span class=err>주차</span><span class=o>?</span><span class=p>&lt;/</span><span class=nt>Link</span><span class=p>&gt;</span> <span class=err>사이트로</span> <span class=err>이동합니다</span><span class=p>.</span>
</span></span><span class=line><span class=cl>    <span class=p>&lt;/</span><span class=nt>Layout</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl>  <span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><p>수동으로 테스트해보니 잘 작동하여 커밋-푸쉬하였다.</p><a href=#오픈-그래프로-결과-미리-알려주기><h2 id=오픈-그래프로-결과-미리-알려주기><span class=hanchor arialabel=Anchor># </span>오픈 그래프로 결과 미리 알려주기</h2></a><p>여기까지 해보니 조금 욕심이 생겼다. 웹 사이트를 소셜 미디어로 공유하면 작게
미리보기를 띄워주는데, 여기서 몇 주차인지 결과를 미리 알 수 있으면 좋겠다는
생각이 들었다.</p><p><img src=https://quartz.jzhao.xyz//2022-10-08/og-old-example.jpeg width=auto alt="카카오톡으로 &amp;ldquo;오늘은 몇 주차&amp;quot;를 공유할 경우의 화면. 오늘은 몇 주차? 오늘은 올해의 몇 번째 주인가?"></p><p>현재 띄워주는 미리보기는 사이트의 제목과 간단한 설명만 나온다.
<a href=https://ogp.me/ rel=noopener>오픈 그래프 프로토콜</a>을 이용하여 간단하게 제목과 설명을
넣었다. 여기서 몇 주차인지 알 수 있다면 링크를 누르지 않아도 알 수 있으니
편리할 것이다.</p><p>기존의 관련 코드는 아래와 같다:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:title&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;오늘은 몇 주차?&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:description&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;오늘은 올해의 몇 번째 주인가요?&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>임베디드 템플릿 엔진을 쓰면 저 내용을 편리하게 바꿀 수 있다. 엘릭서 공부 겸
엘릭서를 활용할 예정이기에
<a href=https://hexdocs.pm/eex/1.14/EEx.html rel=noopener>EEx</a> 문법에
맞게 고쳐준다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-html data-lang=html><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:title&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;&lt;%= @og_title %&gt;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:description&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;&lt;%= @og_description %&gt;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:type&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;&lt;%= @og_type %&gt;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:url&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;&lt;%= @og_url %&gt;&#34;</span><span class=p>&gt;</span>
</span></span><span class=line><span class=cl><span class=p>&lt;</span><span class=nt>meta</span> <span class=na>property</span><span class=o>=</span><span class=s>&#34;og:image&#34;</span> <span class=na>content</span><span class=o>=</span><span class=s>&#34;&lt;%= @og_image %&gt;&#34;</span><span class=p>&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>이제 엘릭서 코드를 이용하여 <code>&lt;%= @variable %></code> 영역을 다른 문자열로 손쉽게
대치할 수 있다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-elixir data-lang=elixir><span class=line><span class=cl><span class=n>source</span> <span class=o>=</span> <span class=s2>&#34;src/index.html.eex&#34;</span>
</span></span><span class=line><span class=cl><span class=n>html</span> <span class=o>=</span> <span class=nc>EEx</span><span class=o>.</span><span class=n>eval_file</span><span class=p>(</span><span class=n>source</span><span class=p>,</span> <span class=ss>assigns</span><span class=p>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=ss>og_title</span><span class=p>:</span> <span class=s2>&#34;오늘은 몇 주차?&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=ss>og_type</span><span class=p>:</span> <span class=s2>&#34;website&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=ss>og_url</span><span class=p>:</span> <span class=n>baseurl</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=ss>og_description</span><span class=p>:</span> <span class=s2>&#34;오늘은 올해의 </span><span class=si>#{</span><span class=n>week_number</span><span class=si>}</span><span class=s2>번째 주입니다!&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=ss>og_image</span><span class=p>:</span> <span class=n>image</span>
</span></span><span class=line><span class=cl><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nc>File</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>dest</span><span class=p>,</span> <span class=n>html</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>주차가 바뀔 때마다 엘릭서 코드를 실행하기만 하면 된다. GitHub Action을 이용하면
GitHub에서 이 작업을 대신 해준다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yml data-lang=yml><span class=line><span class=cl><span class=c># 많이 생략함</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Build Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>on</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>schedule</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>cron</span><span class=p>:</span><span class=w> </span><span class=m>0</span><span class=w> </span><span class=m>0</span><span class=w> </span>*<span class=w> </span>*<span class=w> </span><span class=m>0</span><span class=w> </span><span class=c># 매주 일요일 0시 0분마다 실행</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>jobs</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>build</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class=l>ubuntu-latest</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>github-pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>${{ steps.deployment.outputs.page_url }}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>steps</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/checkout@v3</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Set up Elixir</span><span class=w> </span><span class=c># for generate open graphs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>build</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class=l>elixir bin/build.exs</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Setup Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/configure-pages@v2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Upload artifact</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/upload-pages-artifact@v1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>with</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>path</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;dest&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span>- <span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>Deploy to GitHub Pages</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=l>deployment</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class=l>actions/deploy-pages@v1  </span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>퍼블리싱해도 바로 카카오톡에서 결과가 반영되지는 않는데, 아래의 주소에서 기존의
썸네일 캐싱을 지워주어야 한다.</p><p><a href=https://developers.kakao.com/tool/debugger/sharing rel=noopener>https://developers.kakao.com/tool/debugger/sharing</a></p><p><img src=https://quartz.jzhao.xyz//2022-10-08/new-og-example.jpeg width=auto alt></p><p><a href=http://debug.iframely.com/ rel=noopener>Iframely</a> 사이트에서 다른 사이트에서 어떻게
파싱되는지 볼 수도 있다.</p><a href=#기타><h2 id=기타><span class=hanchor arialabel=Anchor># </span>기타</h2></a><p>생각나는 대로 빠르게 구현해서 몇 가지 문제가 예상된다.</p><p>먼저 소셜 미디어 서비스에서 페이지를 캐싱할 경우, 실제의 주수(<em>week number</em>)와
다른 주수가 미리보기 될 수 있다.</p><p>별 다른 계산 없이 갱신 시기를 잡아, 실제 시간과 표기되는 주수가 일치하지 않을
수 있다.</p><p>엘릭서로 구현하였는데, 바뀌는 내용은 실질적으로 숫자 뿐이 없으니 의존성 없이
셸 스크립트로 작성하는 것이 더 좋을 법하다.</p><p>이 문제들은 실제로 문제가 생기면 해결하기로 하자</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li>No backlinks found</li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://quartz.jzhao.xyz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by An Nyeong using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2022</p><ul><li><a href=https://quartz.jzhao.xyz/>Home</a></li><li><a href=https://misskey.dev/@annyeong>연합우주</a></li><li><a href=https://github.com/nyeong>Github</a></li></ul></footer></div></div></body></html>