{"pageProps":{"note":{"title":"디자인 패턴","description":null,"date":"2023-02-24T00:00:00.000Z","tags":null,"body":{"raw":"\n## 의존성 주입\n\nDI; Dependency Injection.\n\n> really just a pretentious way to say 'taking an argument'[^1]\n\n[^1]: https://www.youtube.com/watch?v=ZasXwtTRkio\n\n-   내가 쓸 인터페이스부터 정의하고 (의존성), 나중에 구현체 끼어넣기 (주입).\n-   구현체만 바꾸면 동작이 그대로라 좋다.\n\n### 예시\n\n```ts\nclass UserService {\n  constructor(\n    // userRepository는 여기서 의존성 주입한다.\n    // 인스턴스 생성은 프레임워크에 맡긴다. (= IoC)\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  async create(body: BodyDto): Promise<ResponseDto> {\n    // this.userRepository로 열심히 작업한다.\n    // 나중에 Repository 종류가 바뀌면 (RDB에서 documented DB로 바뀐다던가) 인터페이스가 동일한 한 Repository만 새로 구현해서 DI하면 된다.\n  }\n}\n```\n\n### 의문\n\n- UserController는 어차피 UserService에 의존하는데 (그렇게 설계했으니까) 이것마저 DI할 필요가 있을까?\n-   모든 것들을 이것저것 DI하는데, 주입하는 대상을 바꾸었을 때 인터페이스가 바뀌는 상황이면 DI를 할 필요가 있을까?\n\n### 참고\n\n- Taehee Kim, [프런트엔드에서 의존성을 제어하는 법](https://twinstae.github.io/testing-with-dependency-injection/#%ED%95%A8%EC%88%98%ED%98%95%EC%97%90%EC%84%9C-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%84-%ED%95%98%EB%A9%B4-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B1%B8%EA%B9%8C).\n- Mark Seemann, [Dependency injection is passing an argument](https://blog.ploeh.dk/2017/01/27/dependency-injection-is-passing-an-argument/).\n- Jin-Wook Chung, [DI는 IoC를 사용하지 않아도 된다](https://jwchung.github.io/DI%EB%8A%94-IoC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EB%8F%84-%EB%90%9C%EB%8B%A4).\n- Rúnar Bjarnason, [Dead-Simple Dependency Injection](https://youtu.be/ZasXwtTRkio).","code":"var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var D=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),y=(t,n)=>{for(var i in n)o(t,i,{get:n[i],enumerable:!0})},s=(t,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of p(n))!C.call(t,r)&&r!==i&&o(t,r,{get:()=>n[r],enumerable:!(c=u(n,r))||c.enumerable});return t};var B=(t,n,i)=>(i=t!=null?d(E(t)):{},s(n||!t||!t.__esModule?o(i,\"default\",{value:t,enumerable:!0}):i,t)),g=t=>s(o({},\"__esModule\",{value:!0}),t);var a=D((R,l)=>{l.exports=_jsx_runtime});var I={};y(I,{default:()=>A,frontmatter:()=>m});var e=B(a()),m={title:\"\\uB514\\uC790\\uC778 \\uD328\\uD134\",description:null,date:new Date(16771968e5),tags:null};function h(t){let n=Object.assign({h2:\"h2\",p:\"p\",blockquote:\"blockquote\",a:\"a\",ul:\"ul\",li:\"li\",h3:\"h3\",pre:\"pre\",code:\"code\"},t.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{children:\"\\uC758\\uC874\\uC131 \\uC8FC\\uC785\"}),`\n`,(0,e.jsx)(n.p,{children:\"DI; Dependency Injection.\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"really just a pretentious way to say 'taking an argument'\",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/watch?v=ZasXwtTRkio\",children:\"^1\"})]}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\uB0B4\\uAC00 \\uC4F8 \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uBD80\\uD130 \\uC815\\uC758\\uD558\\uACE0 (\\uC758\\uC874\\uC131), \\uB098\\uC911\\uC5D0 \\uAD6C\\uD604\\uCCB4 \\uB07C\\uC5B4\\uB123\\uAE30 (\\uC8FC\\uC785).\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uAD6C\\uD604\\uCCB4\\uB9CC \\uBC14\\uAFB8\\uBA74 \\uB3D9\\uC791\\uC774 \\uADF8\\uB300\\uB85C\\uB77C \\uC88B\\uB2E4.\"}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uC608\\uC2DC\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"language-ts\",children:`class UserService {\n  constructor(\n    // userRepository\\uB294 \\uC5EC\\uAE30\\uC11C \\uC758\\uC874\\uC131 \\uC8FC\\uC785\\uD55C\\uB2E4.\n    // \\uC778\\uC2A4\\uD134\\uC2A4 \\uC0DD\\uC131\\uC740 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uC5D0 \\uB9E1\\uAE34\\uB2E4. (= IoC)\n    @InjectRepository(User)\n    private readonly userRepository: Repository<User>,\n  ) {}\n\n  async create(body: BodyDto): Promise<ResponseDto> {\n    // this.userRepository\\uB85C \\uC5F4\\uC2EC\\uD788 \\uC791\\uC5C5\\uD55C\\uB2E4.\n    // \\uB098\\uC911\\uC5D0 Repository \\uC885\\uB958\\uAC00 \\uBC14\\uB00C\\uBA74 (RDB\\uC5D0\\uC11C documented DB\\uB85C \\uBC14\\uB010\\uB2E4\\uB358\\uAC00) \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uAC00 \\uB3D9\\uC77C\\uD55C \\uD55C Repository\\uB9CC \\uC0C8\\uB85C \\uAD6C\\uD604\\uD574\\uC11C DI\\uD558\\uBA74 \\uB41C\\uB2E4.\n  }\n}\n`})}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uC758\\uBB38\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"UserController\\uB294 \\uC5B4\\uCC28\\uD53C UserService\\uC5D0 \\uC758\\uC874\\uD558\\uB294\\uB370 (\\uADF8\\uB807\\uAC8C \\uC124\\uACC4\\uD588\\uC73C\\uB2C8\\uAE4C) \\uC774\\uAC83\\uB9C8\\uC800 DI\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC744\\uAE4C?\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uBAA8\\uB4E0 \\uAC83\\uB4E4\\uC744 \\uC774\\uAC83\\uC800\\uAC83 DI\\uD558\\uB294\\uB370, \\uC8FC\\uC785\\uD558\\uB294 \\uB300\\uC0C1\\uC744 \\uBC14\\uAFB8\\uC5C8\\uC744 \\uB54C \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uAC00 \\uBC14\\uB00C\\uB294 \\uC0C1\\uD669\\uC774\\uBA74 DI\\uB97C \\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC744\\uAE4C?\"}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{children:\"\\uCC38\\uACE0\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Taehee Kim, \",(0,e.jsx)(n.a,{href:\"https://twinstae.github.io/testing-with-dependency-injection/#%ED%95%A8%EC%88%98%ED%98%95%EC%97%90%EC%84%9C-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%84-%ED%95%98%EB%A9%B4-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\",children:\"\\uD504\\uB7F0\\uD2B8\\uC5D4\\uB4DC\\uC5D0\\uC11C \\uC758\\uC874\\uC131\\uC744 \\uC81C\\uC5B4\\uD558\\uB294 \\uBC95\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Mark Seemann, \",(0,e.jsx)(n.a,{href:\"https://blog.ploeh.dk/2017/01/27/dependency-injection-is-passing-an-argument/\",children:\"Dependency injection is passing an argument\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Jin-Wook Chung, \",(0,e.jsx)(n.a,{href:\"https://jwchung.github.io/DI%EB%8A%94-IoC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EB%8F%84-%EB%90%9C%EB%8B%A4\",children:\"DI\\uB294 IoC\\uB97C \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uB41C\\uB2E4\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"R\\xFAnar Bjarnason, \",(0,e.jsx)(n.a,{href:\"https://youtu.be/ZasXwtTRkio\",children:\"Dead-Simple Dependency Injection\"}),\".\"]}),`\n`]})]})}function j(t={}){let{wrapper:n}=t.components||{};return n?(0,e.jsx)(n,Object.assign({},t,{children:(0,e.jsx)(h,t)})):h(t)}var A=j;return g(I);})();\n;return Component;"},"_id":"design-pattern.md","_raw":{"sourceFilePath":"design-pattern.md","sourceFileName":"design-pattern.md","sourceFileDir":".","contentType":"markdown","flattenedPath":"design-pattern"},"type":"Note","slug":"design-pattern"}},"__N_SSG":true}