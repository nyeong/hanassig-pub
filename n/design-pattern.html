<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/5e2f81e3348184c3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5e2f81e3348184c3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4df221df76d0b5c0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9cdcdb934f7926cf.js" defer=""></script><script src="/_next/static/chunks/534-7c3f61d00df522a4.js" defer=""></script><script src="/_next/static/chunks/pages/n/%5B%5B...slug%5D%5D-f567fc50f29fb614.js" defer=""></script><script src="/_next/static/naB5kp70pLF4HX9bFNvdK/_buildManifest.js" defer=""></script><script src="/_next/static/naB5kp70pLF4HX9bFNvdK/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="font-serif antialiased container grid grid-cols-1 p-3"><nav class="mb-5"><a class="font-bold transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/">하나씩</a><a class=" transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/n">index</a></nav><main><article class="prose"><header><h1>디자인 패턴</h1></header><h2 id="의존성-주입">의존성 주입</h2>
<p>DI; Dependency Injection.</p>
<blockquote>
<p>really just a pretentious way to say &#x27;taking an argument&#x27;<sup><a href="#user-content-fn-1" id="user-content-fnref-1" data-footnote-ref="true" aria-describedby="footnote-label">1</a></sup></p>
</blockquote>
<ul>
<li>내가 쓸 인터페이스부터 정의하고 (의존성), 나중에 구현체 끼어넣기 (주입).</li>
<li>구현체만 바꾸면 동작이 그대로라 좋다.</li>
</ul>
<h3 id="예시">예시</h3>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token comment">// userRepository는 여기서 의존성 주입한다.</span>
</span><span class="code-line">    <span class="token comment">// 인스턴스 생성은 프레임워크에 맡긴다. (= IoC)</span>
</span><span class="code-line">    <span class="token decorator"><span class="token at operator">@</span><span class="token function">InjectRepository</span></span><span class="token punctuation">(</span>User<span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token keyword">private</span> <span class="token keyword">readonly</span> userRepository<span class="token operator">:</span> Repository<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">async</span> <span class="token function">create</span><span class="token punctuation">(</span>body<span class="token operator">:</span> BodyDto<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>ResponseDto<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// this.userRepository로 열심히 작업한다.</span>
</span><span class="code-line">    <span class="token comment">// 나중에 Repository 종류가 바뀌면 (RDB에서 documented DB로 바뀐다던가) 인터페이스가 동일한 한 Repository만 새로 구현해서 DI하면 된다.</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="의문">의문</h3>
<ul>
<li>UserController는 어차피 UserService에 의존하는데 (그렇게 설계했으니까) 이것마저 DI할 필요가 있을까?</li>
<li>모든 것들을 이것저것 DI하는데, 주입하는 대상을 바꾸었을 때 인터페이스가 바뀌는 상황이면 DI를 할 필요가 있을까?</li>
</ul>
<h3 id="참고">참고</h3>
<ul>
<li>Taehee Kim, <a href="https://twinstae.github.io/testing-with-dependency-injection/#%ED%95%A8%EC%88%98%ED%98%95%EC%97%90%EC%84%9C-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%84-%ED%95%98%EB%A9%B4-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B1%B8%EA%B9%8C" rel="nofollow">프런트엔드에서 의존성을 제어하는 법</a>.</li>
<li>Mark Seemann, <a href="https://blog.ploeh.dk/2017/01/27/dependency-injection-is-passing-an-argument/" rel="nofollow">Dependency injection is passing an argument</a>.</li>
<li>Jin-Wook Chung, <a href="https://jwchung.github.io/DI%EB%8A%94-IoC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EB%8F%84-%EB%90%9C%EB%8B%A4" rel="nofollow">DI는 IoC를 사용하지 않아도 된다</a>.</li>
<li>Rúnar Bjarnason, <a href="https://youtu.be/ZasXwtTRkio" rel="nofollow">Dead-Simple Dependency Injection</a>.</li>
</ul>
<section data-footnotes="true" class="footnotes"><h2 class="sr-only" id="footnote-label">Footnotes</h2>
<ol>
<li id="user-content-fn-1">
<p><a href="https://www.youtube.com/watch?v=ZasXwtTRkio" rel="nofollow">https://www.youtube.com/watch?v=ZasXwtTRkio</a> <a href="#user-content-fnref-1" data-footnote-backref="true" class="data-footnote-backref" aria-label="Back to content">↩</a></p>
</li>
</ol>
</section></article><footer></footer></main><footer><p>© <!-- -->2023<!-- --> An Nyeong. <a target="_blank" href="https://github.com/nyeong/hanassig/blob/main/LICENSE">CC BY-SA</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":"var Component=(()=\u003e{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var k=(a,n)=\u003e()=\u003e(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=\u003e{for(var s in n)o(a,s,{get:n[s],enumerable:!0})},l=(a,n,s,t)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let c of m(n))!N.call(a,c)\u0026\u0026c!==s\u0026\u0026o(a,c,{get:()=\u003en[c],enumerable:!(t=p(n,c))||t.enumerable});return a};var E=(a,n,s)=\u003e(s=a!=null?h(u(a)):{},l(n||!a||!a.__esModule?o(s,\"default\",{value:a,enumerable:!0}):s,a)),y=a=\u003el(o({},\"__esModule\",{value:!0}),a);var r=k((b,i)=\u003e{i.exports=_jsx_runtime});var g={};f(g,{default:()=\u003eD,frontmatter:()=\u003eC});var e=E(r()),C={title:\"\\uB514\\uC790\\uC778 \\uD328\\uD134\",description:null,date:new Date(16771968e5),tags:null};function d(a){let n=Object.assign({h2:\"h2\",p:\"p\",blockquote:\"blockquote\",sup:\"sup\",a:\"a\",ul:\"ul\",li:\"li\",h3:\"h3\",pre:\"pre\",code:\"code\",span:\"span\",section:\"section\",ol:\"ol\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.h2,{id:\"\\uC758\\uC874\\uC131-\\uC8FC\\uC785\",children:\"\\uC758\\uC874\\uC131 \\uC8FC\\uC785\"}),`\n`,(0,e.jsx)(n.p,{children:\"DI; Dependency Injection.\"}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"really just a pretentious way to say 'taking an argument'\",(0,e.jsx)(n.sup,{children:(0,e.jsx)(n.a,{href:\"#user-content-fn-1\",id:\"user-content-fnref-1\",\"data-footnote-ref\":!0,\"aria-describedby\":\"footnote-label\",children:\"1\"})})]}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"\\uB0B4\\uAC00 \\uC4F8 \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uBD80\\uD130 \\uC815\\uC758\\uD558\\uACE0 (\\uC758\\uC874\\uC131), \\uB098\\uC911\\uC5D0 \\uAD6C\\uD604\\uCCB4 \\uB07C\\uC5B4\\uB123\\uAE30 (\\uC8FC\\uC785).\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uAD6C\\uD604\\uCCB4\\uB9CC \\uBC14\\uAFB8\\uBA74 \\uB3D9\\uC791\\uC774 \\uADF8\\uB300\\uB85C\\uB77C \\uC88B\\uB2E4.\"}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{id:\"\\uC608\\uC2DC\",children:\"\\uC608\\uC2DC\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-ts\",children:(0,e.jsxs)(n.code,{className:\"language-ts code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"class\"}),\" \",(0,e.jsx)(n.span,{className:\"token class-name\",children:\"UserService\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token function\",children:\"constructor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// userRepository\\uB294 \\uC5EC\\uAE30\\uC11C \\uC758\\uC874\\uC131 \\uC8FC\\uC785\\uD55C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\uC778\\uC2A4\\uD134\\uC2A4 \\uC0DD\\uC131\\uC740 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uC5D0 \\uB9E1\\uAE34\\uB2E4. (= IoC)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token decorator\",children:[(0,e.jsx)(n.span,{className:\"token at operator\",children:\"@\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"InjectRepository\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"User\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"private\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"readonly\"}),\" userRepository\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" Repository\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"User\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"async\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"create\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),\"body\",(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" BodyDto\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin\",children:\"Promise\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003c\"}),\"ResponseDto\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\u003e\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// this.userRepository\\uB85C \\uC5F4\\uC2EC\\uD788 \\uC791\\uC5C5\\uD55C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"// \\uB098\\uC911\\uC5D0 Repository \\uC885\\uB958\\uAC00 \\uBC14\\uB00C\\uBA74 (RDB\\uC5D0\\uC11C documented DB\\uB85C \\uBC14\\uB010\\uB2E4\\uB358\\uAC00) \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uAC00 \\uB3D9\\uC77C\\uD55C \\uD55C Repository\\uB9CC \\uC0C8\\uB85C \\uAD6C\\uD604\\uD574\\uC11C DI\\uD558\\uBA74 \\uB41C\\uB2E4.\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.h3,{id:\"\\uC758\\uBB38\",children:\"\\uC758\\uBB38\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"UserController\\uB294 \\uC5B4\\uCC28\\uD53C UserService\\uC5D0 \\uC758\\uC874\\uD558\\uB294\\uB370 (\\uADF8\\uB807\\uAC8C \\uC124\\uACC4\\uD588\\uC73C\\uB2C8\\uAE4C) \\uC774\\uAC83\\uB9C8\\uC800 DI\\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC744\\uAE4C?\"}),`\n`,(0,e.jsx)(n.li,{children:\"\\uBAA8\\uB4E0 \\uAC83\\uB4E4\\uC744 \\uC774\\uAC83\\uC800\\uAC83 DI\\uD558\\uB294\\uB370, \\uC8FC\\uC785\\uD558\\uB294 \\uB300\\uC0C1\\uC744 \\uBC14\\uAFB8\\uC5C8\\uC744 \\uB54C \\uC778\\uD130\\uD398\\uC774\\uC2A4\\uAC00 \\uBC14\\uB00C\\uB294 \\uC0C1\\uD669\\uC774\\uBA74 DI\\uB97C \\uD560 \\uD544\\uC694\\uAC00 \\uC788\\uC744\\uAE4C?\"}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{id:\"\\uCC38\\uACE0\",children:\"\\uCC38\\uACE0\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Taehee Kim, \",(0,e.jsx)(n.a,{href:\"https://twinstae.github.io/testing-with-dependency-injection/#%ED%95%A8%EC%88%98%ED%98%95%EC%97%90%EC%84%9C-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%A3%BC%EC%9E%85%EC%9D%84-%ED%95%98%EB%A9%B4-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B1%B8%EA%B9%8C\",rel:\"nofollow\",children:\"\\uD504\\uB7F0\\uD2B8\\uC5D4\\uB4DC\\uC5D0\\uC11C \\uC758\\uC874\\uC131\\uC744 \\uC81C\\uC5B4\\uD558\\uB294 \\uBC95\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Mark Seemann, \",(0,e.jsx)(n.a,{href:\"https://blog.ploeh.dk/2017/01/27/dependency-injection-is-passing-an-argument/\",rel:\"nofollow\",children:\"Dependency injection is passing an argument\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Jin-Wook Chung, \",(0,e.jsx)(n.a,{href:\"https://jwchung.github.io/DI%EB%8A%94-IoC%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%A7%80-%EC%95%8A%EC%95%84%EB%8F%84-%EB%90%9C%EB%8B%A4\",rel:\"nofollow\",children:\"DI\\uB294 IoC\\uB97C \\uC0AC\\uC6A9\\uD558\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uB41C\\uB2E4\"}),\".\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"R\\xFAnar Bjarnason, \",(0,e.jsx)(n.a,{href:\"https://youtu.be/ZasXwtTRkio\",rel:\"nofollow\",children:\"Dead-Simple Dependency Injection\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.section,{\"data-footnotes\":!0,className:\"footnotes\",children:[(0,e.jsx)(n.h2,{className:\"sr-only\",id:\"footnote-label\",children:\"Footnotes\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{id:\"user-content-fn-1\",children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://www.youtube.com/watch?v=ZasXwtTRkio\",rel:\"nofollow\",children:\"https://www.youtube.com/watch?v=ZasXwtTRkio\"}),\" \",(0,e.jsx)(n.a,{href:\"#user-content-fnref-1\",\"data-footnote-backref\":!0,className:\"data-footnote-backref\",\"aria-label\":\"Back to content\",children:\"\\u21A9\"})]}),`\n`]}),`\n`]}),`\n`]})]})}function w(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,Object.assign({},a,{children:(0,e.jsx)(d,a)})):d(a)}var D=w;return y(g);})();\n;return Component;","title":"디자인 패턴"},"__N_SSG":true},"page":"/n/[[...slug]]","query":{"slug":["design-pattern"]},"buildId":"naB5kp70pLF4HX9bFNvdK","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>