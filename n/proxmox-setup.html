<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/5e2f81e3348184c3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5e2f81e3348184c3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4df221df76d0b5c0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9cdcdb934f7926cf.js" defer=""></script><script src="/_next/static/chunks/534-7c3f61d00df522a4.js" defer=""></script><script src="/_next/static/chunks/pages/n/%5B%5B...slug%5D%5D-f567fc50f29fb614.js" defer=""></script><script src="/_next/static/bKWb7S6thQc5vLi_B-Fj7/_buildManifest.js" defer=""></script><script src="/_next/static/bKWb7S6thQc5vLi_B-Fj7/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="font-serif antialiased container grid grid-cols-1 p-3"><nav class="mb-5"><a class="font-bold transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/">하나씩</a><a class=" transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/n">index</a></nav><main><article class="prose"><header><h1>Proxmox VE 기초설정</h1></header><h2 id="유저-설정하기">유저 설정하기</h2>
<p>항상 시스템 구성하면 root 외의 유저 계정 생성하고 SSH 접속 제한하자.</p>
<p>서버에 접속하여 <code>adduser</code>로 유저를 생성한다.</p>
<pre><code class="code-highlight"><span class="code-line">$ adduser nyeong
</span><span class="code-line">$ apt install sudo
</span><span class="code-line">$ groupadd sudoers
</span><span class="code-line">$ usermod -g suoders nyeong
</span><span class="code-line">$ EDITOR=vi visudo
</span><span class="code-line">$ su nyeong
</span></code></pre>
<p>로컬로 빠져나와 SSH 공개키를 서버로 복사한다.</p>
<pre><code class="code-highlight"><span class="code-line">$ ssh-copy-id 192.168.1.100
</span><span class="code-line">/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: &quot;/Users/nyeong/.ssh/id_ed25519.pub&quot;
</span><span class="code-line">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
</span><span class="code-line">/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
</span><span class="code-line">nyeong@192.168.1.100&#x27;s password:
</span><span class="code-line">
</span><span class="code-line">Number of key(s) added:        1
</span><span class="code-line">
</span><span class="code-line">Now try logging into the machine, with:   &quot;ssh &#x27;192.168.1.100&#x27;&quot;
</span><span class="code-line">and check to make sure that only the key(s) you wanted were added.
</span></code></pre>
<p>다시 서버에 접속하여 ssh 설정을 바꾼다.</p>
<pre><code class="code-highlight"><span class="code-line"># /etc/ssh/sshd_config
</span><span class="code-line">PasswordAuthentication no
</span><span class="code-line">PermitRootLogin no
</span></code></pre>
<p>그 후 다시 <code>ssh</code> 서비스를 재시작한다.</p>
<pre><code class="code-highlight"><span class="code-line">$ sudo systemctl restart ssh
</span></code></pre>
<p>이후 ssh로 root로 로그인은 불가능하다.</p>
<p>리눅스 계정이 있더라도 Proxmox VE 유저는 별도로 추가해야한다.
<code>https://proxmox-ip:8006</code>으로 이동하여 proxmox 웹 환경에 접속하여
datacenter -&gt; permissions -&gt; user로 이동하여 유저를
추가한다. <code>Realm</code>은 <code>Linux PAM</code>으로, 유저이름은 방금 추가한 리눅스 유저이름으로
한다.</p>
<p><img src="/assets/proxmox-adduser.png" alt=""/></p>
<h2 id="패키지-저장소-관리">패키지 저장소 관리</h2>
<p>기업 지원 패키지는 유료이기 때문에 주석처리한다.</p>
<pre><code class="code-highlight"><span class="code-line">vi /etc/apt/sources.list.d/pve-enterprise.list
</span></code></pre>
<p><code>/etc/apt/sources.list</code> 파일에 비 구독 저장소를 추가한다.</p>
<pre><code class="code-highlight"><span class="code-line">deb http://download.proxmox.com/debian/pve bullseye pve-no-subscription
</span></code></pre>
<pre><code class="code-highlight"><span class="code-line">apt update
</span><span class="code-line">apt dist-upgrade
</span></code></pre>
<h2 id="컨테이너-만들기">컨테이너 만들기</h2>
<p>다음의 명령어로 컨테이너 이미지 목록을 업데이트한다.</p>
<pre><code class="code-highlight"><span class="code-line">$ sudo pveam update
</span><span class="code-line">$ sudo pveam available
</span></code></pre>
<h2 id="유용한-명령어">유용한 명령어</h2>
<pre><code class="code-highlight"><span class="code-line">pct enter &lt;vmid&gt;
</span></code></pre></article><footer></footer></main><footer><p>© <!-- -->2023<!-- --> An Nyeong. <a target="_blank" href="https://github.com/nyeong/hanassig/blob/main/LICENSE">CC BY-SA</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":"var Component=(()=\u003e{var t=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(s,e)=\u003e()=\u003e(e||s((e={exports:{}}).exports,e),e.exports),x=(s,e)=\u003e{for(var c in e)i(s,c,{get:e[c],enumerable:!0})},a=(s,e,c,l)=\u003e{if(e\u0026\u0026typeof e==\"object\"||typeof e==\"function\")for(let d of m(e))!u.call(s,d)\u0026\u0026d!==c\u0026\u0026i(s,d,{get:()=\u003ee[d],enumerable:!(l=p(e,d))||l.enumerable});return s};var y=(s,e,c)=\u003e(c=s!=null?t(g(s)):{},a(e||!s||!s.__esModule?i(c,\"default\",{value:s,enumerable:!0}):c,s)),b=s=\u003ea(i({},\"__esModule\",{value:!0}),s);var r=N((k,o)=\u003e{o.exports=_jsx_runtime});var $={};x($,{default:()=\u003ev,frontmatter:()=\u003ew});var n=y(r()),w={title:\"Proxmox VE \\uAE30\\uCD08\\uC124\\uC815\",description:\"Proxmox VE \\uC124\\uCE58 \\uD6C4 \\uD574\\uC57C\\uD558\\uB294 \\uAE30\\uCD08 \\uC124\\uC815\",date:new Date(16790976e5),tags:null};function h(s){let e=Object.assign({h2:\"h2\",p:\"p\",code:\"code\",pre:\"pre\",span:\"span\",img:\"img\"},s.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{id:\"\\uC720\\uC800-\\uC124\\uC815\\uD558\\uAE30\",children:\"\\uC720\\uC800 \\uC124\\uC815\\uD558\\uAE30\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\uD56D\\uC0C1 \\uC2DC\\uC2A4\\uD15C \\uAD6C\\uC131\\uD558\\uBA74 root \\uC678\\uC758 \\uC720\\uC800 \\uACC4\\uC815 \\uC0DD\\uC131\\uD558\\uACE0 SSH \\uC811\\uC18D \\uC81C\\uD55C\\uD558\\uC790.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\uC11C\\uBC84\\uC5D0 \\uC811\\uC18D\\uD558\\uC5EC \",(0,n.jsx)(e.code,{children:\"adduser\"}),\"\\uB85C \\uC720\\uC800\\uB97C \\uC0DD\\uC131\\uD55C\\uB2E4.\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ adduser nyeong\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ apt install sudo\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ groupadd sudoers\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ usermod -g suoders nyeong\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ EDITOR=vi visudo\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ su nyeong\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\uB85C\\uCEEC\\uB85C \\uBE60\\uC838\\uB098\\uC640 SSH \\uACF5\\uAC1C\\uD0A4\\uB97C \\uC11C\\uBC84\\uB85C \\uBCF5\\uC0AC\\uD55C\\uB2E4.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ ssh-copy-id 192.168.1.100\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: \"/Users/nyeong/.ssh/id_ed25519.pub\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`nyeong@192.168.1.100's password:\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Number of key(s) added:        1\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`Now try logging into the machine, with:   \"ssh '192.168.1.100'\"\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`and check to make sure that only the key(s) you wanted were added.\n`})]})}),`\n`,(0,n.jsx)(e.p,{children:\"\\uB2E4\\uC2DC \\uC11C\\uBC84\\uC5D0 \\uC811\\uC18D\\uD558\\uC5EC ssh \\uC124\\uC815\\uC744 \\uBC14\\uAFBC\\uB2E4.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`# /etc/ssh/sshd_config\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`PasswordAuthentication no\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`PermitRootLogin no\n`})]})}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\uADF8 \\uD6C4 \\uB2E4\\uC2DC \",(0,n.jsx)(e.code,{children:\"ssh\"}),\" \\uC11C\\uBE44\\uC2A4\\uB97C \\uC7AC\\uC2DC\\uC791\\uD55C\\uB2E4.\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`$ sudo systemctl restart ssh\n`})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\uC774\\uD6C4 ssh\\uB85C root\\uB85C \\uB85C\\uADF8\\uC778\\uC740 \\uBD88\\uAC00\\uB2A5\\uD558\\uB2E4.\"}),`\n`,(0,n.jsxs)(e.p,{children:[`\\uB9AC\\uB205\\uC2A4 \\uACC4\\uC815\\uC774 \\uC788\\uB354\\uB77C\\uB3C4 Proxmox VE \\uC720\\uC800\\uB294 \\uBCC4\\uB3C4\\uB85C \\uCD94\\uAC00\\uD574\\uC57C\\uD55C\\uB2E4.\n`,(0,n.jsx)(e.code,{children:\"https://proxmox-ip:8006\"}),`\\uC73C\\uB85C \\uC774\\uB3D9\\uD558\\uC5EC proxmox \\uC6F9 \\uD658\\uACBD\\uC5D0 \\uC811\\uC18D\\uD558\\uC5EC\ndatacenter -\u003e permissions -\u003e user\\uB85C \\uC774\\uB3D9\\uD558\\uC5EC \\uC720\\uC800\\uB97C\n\\uCD94\\uAC00\\uD55C\\uB2E4. `,(0,n.jsx)(e.code,{children:\"Realm\"}),\"\\uC740 \",(0,n.jsx)(e.code,{children:\"Linux PAM\"}),`\\uC73C\\uB85C, \\uC720\\uC800\\uC774\\uB984\\uC740 \\uBC29\\uAE08 \\uCD94\\uAC00\\uD55C \\uB9AC\\uB205\\uC2A4 \\uC720\\uC800\\uC774\\uB984\\uC73C\\uB85C\n\\uD55C\\uB2E4.`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/assets/proxmox-adduser.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"\\uD328\\uD0A4\\uC9C0-\\uC800\\uC7A5\\uC18C-\\uAD00\\uB9AC\",children:\"\\uD328\\uD0A4\\uC9C0 \\uC800\\uC7A5\\uC18C \\uAD00\\uB9AC\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\uAE30\\uC5C5 \\uC9C0\\uC6D0 \\uD328\\uD0A4\\uC9C0\\uB294 \\uC720\\uB8CC\\uC774\\uAE30 \\uB54C\\uBB38\\uC5D0 \\uC8FC\\uC11D\\uCC98\\uB9AC\\uD55C\\uB2E4.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`vi /etc/apt/sources.list.d/pve-enterprise.list\n`})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"/etc/apt/sources.list\"}),\" \\uD30C\\uC77C\\uC5D0 \\uBE44 \\uAD6C\\uB3C5 \\uC800\\uC7A5\\uC18C\\uB97C \\uCD94\\uAC00\\uD55C\\uB2E4.\"]}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`deb http://download.proxmox.com/debian/pve bullseye pve-no-subscription\n`})})}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`apt update\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`apt dist-upgrade\n`})]})}),`\n`,(0,n.jsx)(e.h2,{id:\"\\uCEE8\\uD14C\\uC774\\uB108-\\uB9CC\\uB4E4\\uAE30\",children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uB9CC\\uB4E4\\uAE30\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\uB2E4\\uC74C\\uC758 \\uBA85\\uB839\\uC5B4\\uB85C \\uCEE8\\uD14C\\uC774\\uB108 \\uC774\\uBBF8\\uC9C0 \\uBAA9\\uB85D\\uC744 \\uC5C5\\uB370\\uC774\\uD2B8\\uD55C\\uB2E4.\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsxs)(e.code,{className:\"code-highlight\",children:[(0,n.jsx)(e.span,{className:\"code-line\",children:`$ sudo pveam update\n`}),(0,n.jsx)(e.span,{className:\"code-line\",children:`$ sudo pveam available\n`})]})}),`\n`,(0,n.jsx)(e.h2,{id:\"\\uC720\\uC6A9\\uD55C-\\uBA85\\uB839\\uC5B4\",children:\"\\uC720\\uC6A9\\uD55C \\uBA85\\uB839\\uC5B4\"}),`\n`,(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:\"code-highlight\",children:(0,n.jsx)(e.span,{className:\"code-line\",children:`pct enter \u003cvmid\u003e\n`})})})]})}function f(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,Object.assign({},s,{children:(0,n.jsx)(h,s)})):h(s)}var v=f;return b($);})();\n;return Component;","title":"Proxmox VE 기초설정"},"__N_SSG":true},"page":"/n/[[...slug]]","query":{"slug":["proxmox-setup"]},"buildId":"bKWb7S6thQc5vLi_B-Fj7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>