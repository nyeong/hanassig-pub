<!DOCTYPE html><html lang="ko"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/5e2f81e3348184c3.css" as="style"/><link rel="stylesheet" href="/_next/static/css/5e2f81e3348184c3.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-ee7e63bc15b31913.js" defer=""></script><script src="/_next/static/chunks/framework-2c79e2a64abdb08b.js" defer=""></script><script src="/_next/static/chunks/main-4df221df76d0b5c0.js" defer=""></script><script src="/_next/static/chunks/pages/_app-9cdcdb934f7926cf.js" defer=""></script><script src="/_next/static/chunks/534-7c3f61d00df522a4.js" defer=""></script><script src="/_next/static/chunks/pages/n/%5B%5B...slug%5D%5D-f567fc50f29fb614.js" defer=""></script><script src="/_next/static/ZxY7jFi6JWwtQziZSS-h2/_buildManifest.js" defer=""></script><script src="/_next/static/ZxY7jFi6JWwtQziZSS-h2/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="font-serif antialiased container grid grid-cols-1 p-3"><nav class="mb-5"><a class="font-bold transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/">하나씩</a><a class=" transition-colors text-gray-600 hover:text-gray-900 no-underline pr-2" href="/n">index</a></nav><main><article class="prose"><header><h1>Proxmox 저장장치 설정</h1></header><h2 id="현재-상황">현재 상황</h2>
<p>현재 시스템에 연결된 저장장치는 세 개이다:</p>
<ol>
<li>NVME SSD (256GB)</li>
<li>HDD (14TB)</li>
<li>HDD (2TB)</li>
</ol>
<ul>
<li>호스트 OS : Proxmox VE를 돌릴 공간</li>
<li>NAS, cloud : 클라우드 저장소 서비스를 대체하기 위함<!-- -->
<ul>
<li>SMB, nextcloud,</li>
</ul>
</li>
<li>DB</li>
<li>그 외 VM을 돌릴 가상 드라이브</li>
</ul>
<h2 id="의문">의문</h2>
<ol>
<li>Proxmox VE에서 직접 스토리지 다루기 vs Guest NAS OS에 패스스루하기.</li>
<li>NextCloud + SMB를 쓰려면 TrueNAS같은 운영체제를 설치하는 것이 좋은가?
아니면 그냥 리눅스에 깔아도 무방한가?</li>
<li>NextCloud를 쓰면 SMB, AFP, NFS 같은 서비스들이 굳이 필요할까?</li>
</ol>
<h2 id="nas-운영하기">NAS 운영하기</h2>
<ul>
<li>어디서든 데이터 접근</li>
<li>사진 백업</li>
</ul>
<p>SMB, AFP, NFS</p>
<ul>
<li>TrueNAS</li>
<li>OMV</li>
<li>Linux</li>
<li>Synology</li>
</ul>
<p>서비스는</p>
<ul>
<li>nextcloud</li>
<li>photoprism</li>
<li>filerun</li>
</ul>
<p>따라서 아래와 같이 계획을 잡음</p>
<ol>
<li>디스크 관리: Proxmox VE에서 ZFS로.</li>
<li>공유 서비스: NextCloud를 최대한 활용.</li>
</ol>
<h2 id="스토리지-설정">스토리지 설정</h2>
<p>ZFS로 구성하려면 RAID, 압축 여부, ashift 등을 설정해야함.</p>
<ul>
<li>RAID: 갖고 있는 디스크가 14TB, 2TB로 용량 차이가 크므로 RAID를 하지 않았음</li>
<li>압축: 일반적으로 lz4가 자원 대비 성능이 좋아 공식 문서에서도 이를 추천함</li>
<li>ashift: 블록의 크기를 결정함. HDD의 블록의 크기가 4KB이므로 12를 썼음.</li>
</ul></article><footer></footer></main><footer><p>© <!-- -->2023<!-- --> An Nyeong. <a target="_blank" href="https://github.com/nyeong/hanassig/blob/main/LICENSE">CC BY-SA</a></p></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"source":"var Component=(()=\u003e{var s=Object.create;var c=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var a=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var D=(i,n)=\u003e()=\u003e(n||i((n={exports:{}}).exports,n),n.exports),p=(i,n)=\u003e{for(var e in n)c(i,e,{get:n[e],enumerable:!0})},h=(i,n,e,d)=\u003e{if(n\u0026\u0026typeof n==\"object\"||typeof n==\"function\")for(let r of a(n))!m.call(i,r)\u0026\u0026r!==e\u0026\u0026c(i,r,{get:()=\u003en[r],enumerable:!(d=x(n,r))||d.enumerable});return i};var B=(i,n,e)=\u003e(e=i!=null?s(S(i)):{},h(n||!i||!i.__esModule?c(e,\"default\",{value:i,enumerable:!0}):e,i)),N=i=\u003eh(c({},\"__esModule\",{value:!0}),i);var o=D((P,t)=\u003e{t.exports=_jsx_runtime});var F={};p(F,{default:()=\u003ef,frontmatter:()=\u003eA});var l=B(o()),A={title:\"Proxmox \\uC800\\uC7A5\\uC7A5\\uCE58 \\uC124\\uC815\",description:\"Proxmox VE\\uC5D0 \\uC800\\uC7A5\\uC7A5\\uCE58\\uB97C \\uC124\\uC815\\uD558\\uAE30\",date:new Date(16790976e5),tags:null};function u(i){let n=Object.assign({h2:\"h2\",p:\"p\",ol:\"ol\",li:\"li\",ul:\"ul\"},i.components);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:\"\\uD604\\uC7AC-\\uC0C1\\uD669\",children:\"\\uD604\\uC7AC \\uC0C1\\uD669\"}),`\n`,(0,l.jsx)(n.p,{children:\"\\uD604\\uC7AC \\uC2DC\\uC2A4\\uD15C\\uC5D0 \\uC5F0\\uACB0\\uB41C \\uC800\\uC7A5\\uC7A5\\uCE58\\uB294 \\uC138 \\uAC1C\\uC774\\uB2E4:\"}),`\n`,(0,l.jsxs)(n.ol,{children:[`\n`,(0,l.jsx)(n.li,{children:\"NVME SSD (256GB)\"}),`\n`,(0,l.jsx)(n.li,{children:\"HDD (14TB)\"}),`\n`,(0,l.jsx)(n.li,{children:\"HDD (2TB)\"}),`\n`]}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"\\uD638\\uC2A4\\uD2B8 OS : Proxmox VE\\uB97C \\uB3CC\\uB9B4 \\uACF5\\uAC04\"}),`\n`,(0,l.jsxs)(n.li,{children:[\"NAS, cloud : \\uD074\\uB77C\\uC6B0\\uB4DC \\uC800\\uC7A5\\uC18C \\uC11C\\uBE44\\uC2A4\\uB97C \\uB300\\uCCB4\\uD558\\uAE30 \\uC704\\uD568\",`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"SMB, nextcloud,\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(n.li,{children:\"DB\"}),`\n`,(0,l.jsx)(n.li,{children:\"\\uADF8 \\uC678 VM\\uC744 \\uB3CC\\uB9B4 \\uAC00\\uC0C1 \\uB4DC\\uB77C\\uC774\\uBE0C\"}),`\n`]}),`\n`,(0,l.jsx)(n.h2,{id:\"\\uC758\\uBB38\",children:\"\\uC758\\uBB38\"}),`\n`,(0,l.jsxs)(n.ol,{children:[`\n`,(0,l.jsx)(n.li,{children:\"Proxmox VE\\uC5D0\\uC11C \\uC9C1\\uC811 \\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uB2E4\\uB8E8\\uAE30 vs Guest NAS OS\\uC5D0 \\uD328\\uC2A4\\uC2A4\\uB8E8\\uD558\\uAE30.\"}),`\n`,(0,l.jsx)(n.li,{children:`NextCloud + SMB\\uB97C \\uC4F0\\uB824\\uBA74 TrueNAS\\uAC19\\uC740 \\uC6B4\\uC601\\uCCB4\\uC81C\\uB97C \\uC124\\uCE58\\uD558\\uB294 \\uAC83\\uC774 \\uC88B\\uC740\\uAC00?\n\\uC544\\uB2C8\\uBA74 \\uADF8\\uB0E5 \\uB9AC\\uB205\\uC2A4\\uC5D0 \\uAE54\\uC544\\uB3C4 \\uBB34\\uBC29\\uD55C\\uAC00?`}),`\n`,(0,l.jsx)(n.li,{children:\"NextCloud\\uB97C \\uC4F0\\uBA74 SMB, AFP, NFS \\uAC19\\uC740 \\uC11C\\uBE44\\uC2A4\\uB4E4\\uC774 \\uAD73\\uC774 \\uD544\\uC694\\uD560\\uAE4C?\"}),`\n`]}),`\n`,(0,l.jsx)(n.h2,{id:\"nas-\\uC6B4\\uC601\\uD558\\uAE30\",children:\"NAS \\uC6B4\\uC601\\uD558\\uAE30\"}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"\\uC5B4\\uB514\\uC11C\\uB4E0 \\uB370\\uC774\\uD130 \\uC811\\uADFC\"}),`\n`,(0,l.jsx)(n.li,{children:\"\\uC0AC\\uC9C4 \\uBC31\\uC5C5\"}),`\n`]}),`\n`,(0,l.jsx)(n.p,{children:\"SMB, AFP, NFS\"}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"TrueNAS\"}),`\n`,(0,l.jsx)(n.li,{children:\"OMV\"}),`\n`,(0,l.jsx)(n.li,{children:\"Linux\"}),`\n`,(0,l.jsx)(n.li,{children:\"Synology\"}),`\n`]}),`\n`,(0,l.jsx)(n.p,{children:\"\\uC11C\\uBE44\\uC2A4\\uB294\"}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"nextcloud\"}),`\n`,(0,l.jsx)(n.li,{children:\"photoprism\"}),`\n`,(0,l.jsx)(n.li,{children:\"filerun\"}),`\n`]}),`\n`,(0,l.jsx)(n.p,{children:\"\\uB530\\uB77C\\uC11C \\uC544\\uB798\\uC640 \\uAC19\\uC774 \\uACC4\\uD68D\\uC744 \\uC7A1\\uC74C\"}),`\n`,(0,l.jsxs)(n.ol,{children:[`\n`,(0,l.jsx)(n.li,{children:\"\\uB514\\uC2A4\\uD06C \\uAD00\\uB9AC: Proxmox VE\\uC5D0\\uC11C ZFS\\uB85C.\"}),`\n`,(0,l.jsx)(n.li,{children:\"\\uACF5\\uC720 \\uC11C\\uBE44\\uC2A4: NextCloud\\uB97C \\uCD5C\\uB300\\uD55C \\uD65C\\uC6A9.\"}),`\n`]}),`\n`,(0,l.jsx)(n.h2,{id:\"\\uC2A4\\uD1A0\\uB9AC\\uC9C0-\\uC124\\uC815\",children:\"\\uC2A4\\uD1A0\\uB9AC\\uC9C0 \\uC124\\uC815\"}),`\n`,(0,l.jsx)(n.p,{children:\"ZFS\\uB85C \\uAD6C\\uC131\\uD558\\uB824\\uBA74 RAID, \\uC555\\uCD95 \\uC5EC\\uBD80, ashift \\uB4F1\\uC744 \\uC124\\uC815\\uD574\\uC57C\\uD568.\"}),`\n`,(0,l.jsxs)(n.ul,{children:[`\n`,(0,l.jsx)(n.li,{children:\"RAID: \\uAC16\\uACE0 \\uC788\\uB294 \\uB514\\uC2A4\\uD06C\\uAC00 14TB, 2TB\\uB85C \\uC6A9\\uB7C9 \\uCC28\\uC774\\uAC00 \\uD06C\\uBBC0\\uB85C RAID\\uB97C \\uD558\\uC9C0 \\uC54A\\uC558\\uC74C\"}),`\n`,(0,l.jsx)(n.li,{children:\"\\uC555\\uCD95: \\uC77C\\uBC18\\uC801\\uC73C\\uB85C lz4\\uAC00 \\uC790\\uC6D0 \\uB300\\uBE44 \\uC131\\uB2A5\\uC774 \\uC88B\\uC544 \\uACF5\\uC2DD \\uBB38\\uC11C\\uC5D0\\uC11C\\uB3C4 \\uC774\\uB97C \\uCD94\\uCC9C\\uD568\"}),`\n`,(0,l.jsx)(n.li,{children:\"ashift: \\uBE14\\uB85D\\uC758 \\uD06C\\uAE30\\uB97C \\uACB0\\uC815\\uD568. HDD\\uC758 \\uBE14\\uB85D\\uC758 \\uD06C\\uAE30\\uAC00 4KB\\uC774\\uBBC0\\uB85C 12\\uB97C \\uC37C\\uC74C.\"}),`\n`]})]})}function M(i={}){let{wrapper:n}=i.components||{};return n?(0,l.jsx)(n,Object.assign({},i,{children:(0,l.jsx)(u,i)})):u(i)}var f=M;return N(F);})();\n;return Component;","title":"Proxmox 저장장치 설정"},"__N_SSG":true},"page":"/n/[[...slug]]","query":{"slug":["proxmox-storage"]},"buildId":"ZxY7jFi6JWwtQziZSS-h2","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>